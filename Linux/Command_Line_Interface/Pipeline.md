# Pipeline

## 개요

__하나의 프로그램의 결과(프로세스의 출력)를 다른 프로그램의 입력(프로세스의 입력)으로 한번에 전달__

<strong>이 또한 핵심기능!!</strong>

<p>ex) ls --help | grep sort</p>
<p>이것또한 여러번 사용 가능!</p>

<br>
<p>팁: ps aux | grep [내 프로세스 명]  이렇게 실행하면 내 프로세스를 확인할 수 있음!</p>

## 자세히

<p>앞에서 터미널은 하나의 프로세스이고, 명령어 실행은 해당 터미널의 정보를 기준으로 백그라운드에 자식프로세스가 fork되어 명령어를 실행하게 된다.</p>

 <p>즉, 터미널에서 'ls' 라는 명령어를 입력하면, 자식프로세스 1개가 fork되어 백그라운드에서 부모프로세스의 정보를 기준으로 해당 명령어 즉, <b>stdin</b>을 통해 정보를 입력받고 <b>stdout</b>을 통해 ls 명령어를 호출한 터미널로 정보를 반환하는 식으로 동작 한다. </p>
<br>
 

<p>그럼 파이프 끼리 연결되면 어떻게 되느냐??</p>

<p>예를들어 #ls | sort | less 명령어를 입력하면 다음과 같이 동작하게 됩니다.</p>

 
<ul>
    <li>ls 동작하는 프로세스 따로</li>
    <li>sort 동작하는 프로세스 따로</li>
    <li>less 동작하는 프로세스 따로</li>
</ul>
 

<p>이렇게 따로 동작하게되며 위 3개의 프로세스는 명령어를 실행한 터미널 프로세스의 자식프로세스로 백그라운드에서 시작하게 된다. 또한 자식 프로세스들은 <b>exec</b> 라는 시스템 콜 함수를 통해 fork가 발생하게 된다.</p>

<br>

<p><b>※중요</b></p>

<p>부모 프로세스(터미널)에서 fork로 인해 자식프로세스들이 생기면 자식 프로세스들은 모두 병렬로 처리되게 된다.</p>

<p>또한 모든 프로세스는 exec 방식으로 호출되어 프로세스 PID는 모두 동일하게 갖게 된다.</p>

<p>프로세스들은 stdin, stdout 방식으로 A | B | C 가 호출된다면,</p>

<p>A의 stdout을 B는 stdin으로 읽어들어오며 C 또한 마찬가지로 동작하게 된다.</p>

<p>그리고 A의 stdout을 받기 전까지 프로세스는 B프로세스는 wait 상태가 되며, C또한 마찬가지 상태가 된다.</p>
<br>
 

<p>이를 그림으로 보면</p>

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FJB1Y9%2Fbtq1yFt5RjS%2F7csNXUqpdfkfEhlesMMf41%2Fimg.png">


<p>이런식으로 진행되게 된다. 즉 왼쪽에서 오른쪽으로 가는 것이다.</p>


<br><br>
<p>출처: https://hwan-shell.tistory.com/324</p>